diff --git a/_mjs/index.mjs b/_mjs/index.mjs
index e2e9cb880bab2fc1ed0939046d6ff49373cba9f0..8bc8342b8e840b01e9fa8a158aed330982bdf403 100644
--- a/_mjs/index.mjs
+++ b/_mjs/index.mjs
@@ -4,6 +4,13 @@ import * as O from "@effect/data/Option";
 import * as RA from "@effect/data/ReadonlyArray";
 import * as RR from "@effect/data/ReadonlyRecord";
 import * as S from "@effect/data/Struct";
+const clone = (original, copy) => {
+  if (original[cloneTrait]) {
+    return original[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+export const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
@@ -21,16 +28,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/_mjs/index.mjs.map b/_mjs/index.mjs.map
index 4a10d5aaaebea84eeba50671d66d7a14ea6bcd74..c14f8fee643f549f6f45414d1f3ef24d9dd68f43 100644
--- a/_mjs/index.mjs.map
+++ b/_mjs/index.mjs.map
@@ -1 +1 @@
-{"version":3,"file":"index.mjs","mappings":"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","names":["E","identity","pipe","O","RA","RR","S","prismComposition","that","self","Builder","getWhole","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","nonNullable","some","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]}
\ No newline at end of file
+{"version":3,"file":"index.mjs","mappings":"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","names":["E","identity","pipe","O","RA","RR","S","clone","original","copy","cloneTrait","Object","setPrototypeOf","getPrototypeOf","Symbol","prismComposition","that","self","Builder","getWhole","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","nonNullable","some","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]}
\ No newline at end of file
diff --git a/index.d.ts b/index.d.ts
index 847108f7c84625766bcb7bd86802299d542789eb..1a1b4e9306816a588c43269ef2d776ff665bb7db 100644
--- a/index.d.ts
+++ b/index.d.ts
@@ -6,6 +6,7 @@ import * as O from "@effect/data/Option";
 import type { Option } from "@effect/data/Option";
 import type { Predicate, Refinement } from "@effect/data/Predicate";
 import type { ReadonlyRecord } from "@effect/data/ReadonlyRecord";
+export declare const cloneTrait: unique symbol;
 /**
  * @since 1.0.0
  */
diff --git a/index.d.ts.map b/index.d.ts.map
index eac9da46ca4595f0bd28e2f6539e170070c89885..9b894e14231b7e63a22d05d3574ddd5701a86637 100644
--- a/index.d.ts.map
+++ b/index.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/index.js b/index.js
index 6ccaf35533312b87b6bc310917301f63d1481b81..3f7191a765fd6c15eea91458663bfc75b1a72ebb 100644
--- a/index.js
+++ b/index.js
@@ -3,7 +3,7 @@
 Object.defineProperty(exports, "__esModule", {
   value: true
 });
-exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = void 0;
+exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = exports.cloneTrait = void 0;
 var E = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Either"));
 var _Function = /*#__PURE__*/require("@effect/data/Function");
 var O = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Option"));
@@ -12,11 +12,19 @@ var RR = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/dat
 var S = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Struct"));
 function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
 function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
+const clone = (original, copy) => {
+  if (original[cloneTrait]) {
+    return original[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
  * second optic.
  */
+exports.cloneTrait = cloneTrait;
 const prismComposition = that => self => new Builder("prism", getWhole => (0, _Function.pipe)(self.getOptic(getWhole), E.flatMap(getPiece => (0, _Function.pipe)(that.getOptic(getPiece), E.orElse(([GetError1, SetPiece]) => (0, _Function.pipe)(self.setOptic(SetPiece)(getWhole), E.match(([_, SetWholeAfter]) => E.left([GetError1, SetWholeAfter]), SetWholeAfter => E.left([GetError1, SetWholeAfter]))))))), SetPiece1 => SetWholeBefore => (0, _Function.pipe)(that.setOptic(SetPiece1)(undefined), E.match(([SetError1, SetPiece]) => (0, _Function.pipe)(self.setOptic(SetPiece)(SetWholeBefore), E.match(([_, SetWholeAfter]) => E.left([SetError1, SetWholeAfter]), SetWholeAfter => E.left([SetError1, SetWholeAfter]))), SetPiece => self.setOptic(SetPiece)(SetWholeBefore))));
 /**
  * Compose two optics when the piece of the whole returned by the first
@@ -29,16 +37,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/index.js.map b/index.js.map
index acf492a27dd0f848c61cb0d8479a002dbb0fd8ed..cc141622df5f75614a23df0fc62f131369f22a24 100644
--- a/index.js.map
+++ b/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","mappings":"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","names":["prismComposition","that","self","Builder","getWhole","getOptic","E","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","S","omit","filter","predicate","message","prism","right","Error","identity","nonNullable","some","O","index","i","optional","RA","get","replaceOption","RR","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]}
\ No newline at end of file
+{"version":3,"file":"index.js","mappings":";;;;;;AAIA;AACA;AACA;AAGA;AACA;AAEA;AAAwC;AAAA;AAExC,MAAMA,KAAK,GAAG,CAAIC,QAAW,EAAEC,IAAO,KAAI;EACxC,IAAID,QAAQ,CAACE,UAAU,CAAC,EAAE;IACxB,OAAOF,QAAQ,CAACE,UAAU,CAAC,CAACD,IAAI,CAAC;;EAEnC,OAAOE,MAAM,CAACC,cAAc,CAACH,IAAI,EAAEE,MAAM,CAACE,cAAc,CAACL,QAAQ,CAAC,CAAC;AACrE,CAAC;AAEM,MAAME,UAAU,gBAAGI,MAAM,EAAE;AAwJlC;;;;;AAAA;AAKA,MAAMC,gBAAgB,GACpBC,IAAoF,IASlFC,IAA4F,IAE5F,IAAIC,OAAO,CACT,OAAO,EACNC,QAAQ,IACP,kBAAI,EACFF,IAAI,CAACG,QAAQ,CAACD,QAAQ,CAAC,EACvBE,CAAC,CAACC,OAAO,CACNC,QAAQ,IACP,kBAAI,EACFP,IAAI,CAACI,QAAQ,CAACG,QAAQ,CAAC,EACvBF,CAAC,CAACG,MAAM,CAAC,CAAC,CAACC,SAAS,EAAEC,QAAQ,CAAC,KAC7B,kBAAI,EACFT,IAAI,CAACU,QAAQ,CAACD,QAAQ,CAAC,CAACP,QAAQ,CAAC,EACjCE,CAAC,CAACO,KAAK,CACL,CAAC,CAACC,CAAC,EAAEC,aAAa,CAAC,KAAKT,CAAC,CAACU,IAAI,CAAC,CAACN,SAAS,EAAEK,aAAa,CAAU,CAAC,EAClEA,aAAa,IAAKT,CAAC,CAACU,IAAI,CAAC,CAACN,SAAS,EAAEK,aAAa,CAAU,CAAC,CAC/D,CACF,CACF,CACF,CACJ,CACF,EACFE,SAAS,IACPC,cAAc,IACb,kBAAI,EACFjB,IAAI,CAACW,QAAQ,CAACK,SAAS,CAAC,CAACE,SAAS,CAAC,EACnCb,CAAC,CAACO,KAAK,CACL,CAAC,CAACO,SAAS,EAAET,QAAQ,CAAC,KACpB,kBAAI,EACFT,IAAI,CAACU,QAAQ,CAACD,QAAQ,CAAC,CAACO,cAAc,CAAC,EACvCZ,CAAC,CAACO,KAAK,CACL,CAAC,CAACC,CAAC,EAAEC,aAAa,CAAC,KAAKT,CAAC,CAACU,IAAI,CAAC,CAACI,SAAS,EAAEL,aAAa,CAAU,CAAC,EAClEA,aAAa,IAAKT,CAAC,CAACU,IAAI,CAAC,CAACI,SAAS,EAAEL,aAAa,CAAU,CAAC,CAC/D,CACF,EACFJ,QAAQ,IAAKT,IAAI,CAACU,QAAQ,CAACD,QAAQ,CAAC,CAACO,cAAc,CAAC,CACtD,CACF,CACN;AAEL;;;;AAIA,MAAMG,eAAe,GASnBpB,IAA4F,IAS1FC,IAA4F,IAE5F,IAAIC,OAAO,CACT,MAAM,EACLmB,CAAC,IACA,kBAAI,EACFpB,IAAI,CAACG,QAAQ,CAACiB,CAAC,CAAC,EAChBhB,CAAC,CAACC,OAAO,CACNgB,CAAC,IACA,kBAAI,EACFtB,IAAI,CAACI,QAAQ,CAACkB,CAAC,CAAC,EAChBjB,CAAC,CAACG,MAAM,CAAC,CAAC,CAACe,EAAE,EAAEC,CAAC,CAAC,KACf,kBAAI,EACFvB,IAAI,CAACU,QAAQ,CAACa,CAAC,CAAC,CAACH,CAAC,CAAC,EACnBhB,CAAC,CAACO,KAAK,CACL,CAAC,CAACa,GAAG,EAAEC,CAAC,CAAC,KAAKrB,CAAC,CAACU,IAAI,CAAC,CAACQ,EAAE,EAAEG,CAAC,CAAU,CAAC,EACrCA,CAAC,IAAKrB,CAAC,CAACU,IAAI,CAAC,CAACQ,EAAE,EAAEG,CAAC,CAAU,CAAC,CAChC,CACF,CACF,CACF,CACJ,CACF,EACFC,CAAC,IACCN,CAAC,IACA,kBAAI,EACFpB,IAAI,CAACG,QAAQ,CAACiB,CAAC,CAAC,EAChBhB,CAAC,CAACC,OAAO,CAAEgB,CAAC,IACV,kBAAI,EACFtB,IAAI,CAACW,QAAQ,CAACgB,CAAC,CAAC,CAACL,CAAC,CAAC,EACnBjB,CAAC,CAACO,KAAK,CACL,CAAC,CAACgB,EAAE,EAAEJ,CAAC,CAAC,KACN,kBAAI,EACFvB,IAAI,CAACU,QAAQ,CAACa,CAAC,CAAC,CAACH,CAAC,CAAC,EACnBhB,CAAC,CAACO,KAAK,CACL,CAAC,CAACC,CAAC,EAAEa,CAAC,CAAC,KAAKrB,CAAC,CAACU,IAAI,CAAC,CAACa,EAAE,EAAEF,CAAC,CAAU,CAAC,EACnCA,CAAC,IAAKrB,CAAC,CAACU,IAAI,CAAC,CAACa,EAAE,EAAEF,CAAC,CAAU,CAAC,CAChC,CACF,EACFF,CAAC,IAAKvB,IAAI,CAACU,QAAQ,CAACa,CAAC,CAAC,CAACH,CAAC,CAAC,CAC3B,CACF,CACF,CACF,CACN;AAEL,MAAMQ,EAAE,GAAgDC,GAAQ,IAC9DC,IAAI,CAAEV,CAAC,IAAKA,CAAC,CAACS,GAAG,CAAC,EAAGN,CAAC,IACnBH,CAAC,IAAI;EACJ,IAAIW,KAAK,CAACC,OAAO,CAACZ,CAAC,CAAC,EAAE;IACpB,MAAMa,GAAG,GAAQb,CAAC,CAACc,KAAK,EAAE;IAC1BD,GAAG,CAACJ,GAAG,CAAC,GAAGN,CAAC;IACZ,OAAOU,GAAG;;EAEZ,OAAO3C,KAAK,CAAC8B,CAAC,EAAE;IAAE,GAAGA,CAAC;IAAE,CAACS,GAAG,GAAGN;EAAC,CAAE,CAAC;AACrC,CAAC,CAAC;AAEN,MAAMY,IAAI,GAAG,CACX,GAAGC,IAAU,KAEbN,IAAI,CAACO,CAAC,CAACF,IAAI,CAAC,GAAGC,IAAI,CAAC,EAAGf,CAAC,IAAMD,CAAC,IAAK9B,KAAK,CAAC8B,CAAC,EAAE;EAAE,GAAGA,CAAC;EAAE,GAAGC;AAAC,CAAE,CAAC,CAAC;AAE/D,MAAMiB,IAAI,GAAG,CACX,GAAGF,IAAU,KAEbN,IAAI,CAACO,CAAC,CAACC,IAAI,CAAC,GAAGF,IAAI,CAAC,EAAGf,CAAC,IAAMD,CAAC,IAAK9B,KAAK,CAAC8B,CAAC,EAAE;EAAE,GAAGA,CAAC;EAAE,GAAGC;AAAC,CAAE,CAAC,CAAC;AAE/D,MAAMkB,MAAM,GAMR,CAAIC,SAAuB,EAAEC,OAAgB,KAC/CC,KAAK,CACFtB,CAAC,IACAoB,SAAS,CAACpB,CAAC,CAAC,GACVhB,CAAC,CAACuC,KAAK,CAACvB,CAAC,CAAC,GACVhB,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAACH,OAAO,IAAI,qDAAqD,CAAC,CAAC,EACvFI,kBAAQ,CACT;AAEH,MAAMC,WAAW,GAAG,MAClBP,MAAM,CAAEnB,CAAI,IAA0BA,CAAC,IAAI,IAAI,EAAE,+BAA+B,CAAC;AAEnF,MAAM2B,IAAI,GAAG,MACXL,KAAK,CAACM,CAAC,CAACrC,KAAK,CAAC,MAAMP,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,iBAAiB,CAAC,CAAC,EAAExC,CAAC,CAACuC,KAAK,CAAC,EAAEK,CAAC,CAACD,IAAI,CAAC;AAE7E,MAAME,KAAK,GAAOC,CAAS,IACzBC,QAAQ,CACL/B,CAAC,IACA,kBAAI,EACFA,CAAC,EACDgC,EAAE,CAACC,GAAG,CAACH,CAAC,CAAC,EACTF,CAAC,CAACrC,KAAK,CACL,MAAMP,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,iBAAiBM,CAAC,EAAE,CAAC,CAAC,EAC7C9C,CAAC,CAACuC,KAAK,CACR,CACF,EACFtB,CAAC,IACCD,CAAC,IACA,kBAAI,EACFgC,EAAE,CAACE,aAAa,CAACJ,CAAC,EAAE7B,CAAC,CAAC,CAACD,CAAC,CAAC,EACzB4B,CAAC,CAACrC,KAAK,CACL,MAAMP,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,iBAAiBM,CAAC,EAAE,CAAC,CAAC,EAC7C9C,CAAC,CAACuC,KAAK,CACR,CACF,CACN;AAEH,MAAMd,GAAG,GAAOA,GAAW,IACzBsB,QAAQ,CACL/B,CAAC,IACA,kBAAI,EACFA,CAAC,EACDmC,EAAE,CAACF,GAAG,CAACxB,GAAG,CAAC,EACXmB,CAAC,CAACrC,KAAK,CACL,MAAMP,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,eAAeY,IAAI,CAACC,SAAS,CAAC5B,GAAG,CAAC,EAAE,CAAC,CAAC,EAC7DzB,CAAC,CAACuC,KAAK,CACR,CACF,EACFtB,CAAC,IACCD,CAAC,IACA,kBAAI,EACFA,CAAC,EACDmC,EAAE,CAACD,aAAa,CAACzB,GAAG,EAAER,CAAC,CAAC,EACxB2B,CAAC,CAACrC,KAAK,CACL,MAAMP,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,eAAeY,IAAI,CAACC,SAAS,CAAC5B,GAAG,CAAC,EAAE,CAAC,CAAC,EAC7DzB,CAAC,CAACuC,KAAK,CACR,CACF,CACN;AAEH,MAAM1C,OAAO;EAWXyD,YACWC,WAA6B,EAC7BxD,QAAsF,EACtFO,QAIqD;IANrD,gBAAW,GAAXiD,WAAW;IACX,aAAQ,GAARxD,QAAQ;IACR,aAAQ,GAARO,QAAQ;EAKhB;EAEHkD,OAAO,CAAC7D,IAAS;IACf,OAAO,IAAI,CAAC4D,WAAW,KAAK,MAAM,IAAI5D,IAAI,CAAC4D,WAAW,KAAK,MAAM,GAC/DxC,eAAe,CAACpB,IAAI,CAAC,CAAC,IAAW,CAAC,GAClCD,gBAAgB,CAACC,IAAI,CAAC,CAAC,IAAW,CAAC;EACvC;EAEA6B,EAAE,CAACC,GAAgB;IACjB,OAAO,IAAI,CAAC+B,OAAO,CAAChC,EAAE,CAAWC,GAAG,CAAC,CAAC;EACxC;EAEAM,IAAI,CAAC,GAAGC,IAAmD;IACzD,OAAO,IAAI,CAACwB,OAAO,CAACzB,IAAI,CAAW,GAAGC,IAAI,CAAC,CAAC;EAC9C;EAEAE,IAAI,CAAC,GAAGF,IAAmD;IACzD,OAAO,IAAI,CAACwB,OAAO,CAACtB,IAAI,CAAW,GAAGF,IAAI,CAAC,CAAC;EAC9C;EAEAG,MAAM,CAACC,SAAyB,EAAEC,OAAgB;IAChD,OAAO,IAAI,CAACmB,OAAO,CAACrB,MAAM,CAACC,SAAS,EAAEC,OAAO,CAAC,CAAC;EACjD;EAEAK,WAAW;IACT,OAAO,IAAI,CAACc,OAAO,CAACd,WAAW,EAAE,CAAC;EACpC;EAEAC,IAAI;IACF,OAAO,IAAI,CAACa,OAAO,CAACb,IAAI,EAAE,CAAC;EAC7B;EAEAE,KAAK,CAACY,CAAS;IACb,OAAO,IAAI,CAACD,OAAO,CAACX,KAAK,CAACY,CAAC,CAAC,CAAC;EAC/B;EAEAhC,GAAG,CAACiC,CAAS;IACX,OAAO,IAAI,CAACF,OAAO,CAAC/B,GAAG,CAACiC,CAAC,CAAC,CAAC;EAC7B;;AAeF;;;;AAIO,MAAMC,GAAG,GAGZ,CAAOV,GAAgB,EAAEW,MAAmB,KAC9C,IAAI/D,OAAO,CAAC,OAAO,EAAGmB,CAAC,IAAKhB,CAAC,CAACuC,KAAK,CAACU,GAAG,CAACjC,CAAC,CAAC,CAAC,EAAGC,CAAC,IAAK,MAAMjB,CAAC,CAACuC,KAAK,CAACqB,MAAM,CAAC3C,CAAC,CAAC,CAAC,CAAC;AAE/E;;;;;;AAAA;AAMO,MAAM4C,EAAE,GAGX,MAAMF,GAAG,CAAClB,kBAAQ,EAAEA,kBAAQ,CAAC;AAYjC;;;;AAAA;AAIO,MAAMf,IAAI,GAGb,CAAOuB,GAAgB,EAAEa,GAA0B,KACrD,IAAIjE,OAAO,CAAC,MAAM,EAAGmB,CAAC,IAAKhB,CAAC,CAACuC,KAAK,CAACU,GAAG,CAACjC,CAAC,CAAC,CAAC,EAAGG,CAAC,IAAMH,CAAC,IAAKhB,CAAC,CAACuC,KAAK,CAACuB,GAAG,CAAC3C,CAAC,CAAC,CAACH,CAAC,CAAC,CAAC,CAAC;AAS/E;;;;AAAA;AAIO,MAAM+C,SAAS,GAAG,CACvBC,UAAoD,EACpDJ,MAAmB,KACO,IAAI/D,OAAO,CAAC,OAAO,EAAEmE,UAAU,EAAG7C,CAAC,IAAMX,CAAC,IAAKR,CAAC,CAACuC,KAAK,CAACqB,MAAM,CAACzC,CAAC,CAAC,CAAC,CAAC;AAO9F;;;;AAAA;AAIO,MAAMmB,KAAK,GAAG,CAAO2B,MAAkC,EAAEL,MAAmB,KACjFG,SAAS,CAAE/C,CAAC,IAAK,kBAAI,EAACiD,MAAM,CAACjD,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,EAAE4C,MAAM,CAAC;AAErE;;;;;;AAAA;AAMO,MAAMQ,IAAI,GAQb,MACF9B,KAAK,CACFtB,CAAC,IACAgC,EAAE,CAACqB,uBAAuB,CAACrD,CAAC,CAAC,GAC3BhB,CAAC,CAACuC,KAAK,CAAC,CAACvB,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAACc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAC3B9B,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAAC,4BAA4B,CAAC,CAAC,EACnD,CAAC,CAAC8B,IAAI,EAAEC,IAAI,CAAC,KAAK,CAACD,IAAI,EAAE,GAAGC,IAAI,CAAC,CAClC;AASH;;;AAAA;AAGO,MAAMC,iBAAiB,GAAG,CAC/BvB,GAAgB,EAChBwB,iBAAqE,KACnC,IAAI5E,OAAO,CAAC,OAAO,EAAGmB,CAAC,IAAKhB,CAAC,CAACuC,KAAK,CAACU,GAAG,CAACjC,CAAC,CAAC,CAAC,EAAEyD,iBAAiB,CAAC;AAOnG;;;AAAA;AAGO,MAAMC,aAAa,GAAG,CAC3BzB,GAAgB,EAChB0B,aAAyC,KAEzCH,iBAAiB,CAACvB,GAAG,EAAGhC,CAAC,IAAMD,CAAC,IAAK,kBAAI,EAAC2D,aAAa,CAAC1D,CAAC,CAAC,EAAEjB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,CAAC;AAExF;;;;;;AAAA;AAMO,MAAM4D,cAAc,GAGvB,CAAIxC,SAAuB,EAAEC,OAAgB,KAC/CqC,aAAa,CAAOjC,kBAAQ,EAAGzB,CAAC,IAC9BoB,SAAS,CAACpB,CAAC,CAAC,GACVhB,CAAC,CAACuC,KAAK,CAACvB,CAAC,CAAC,GACVhB,CAAC,CAACU,IAAI,CAAC,IAAI8B,KAAK,CAACH,OAAO,IAAI,qDAAqD,CAAC,CAAC,CAAC;AAS1F;;;;AAAA;AAIO,MAAMwC,YAAY,GAAG,CAC1Bb,UAAoD,EACpDS,iBAAqE,KACxC,IAAI5E,OAAO,CAAC,MAAM,EAAEmE,UAAU,EAAES,iBAAiB,CAAC;AAOjF;;;;AAAA;AAIO,MAAM1B,QAAQ,GAAG,CACtBkB,MAAkC,EAClCU,aAAmD,KAEnDE,YAAY,CACT7D,CAAC,IAAK,kBAAI,EAACiD,MAAM,CAACjD,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,EAC/CC,CAAC,IAAMD,CAAC,IAAK,kBAAI,EAAC2D,aAAa,CAAC1D,CAAC,CAAC,CAACD,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,CAClE;AAEH;;;;;;AAAA;AAMO,MAAM8D,OAAO,GAAG,MACrBC,SAAS,CAAC/E,CAAC,CAACuC,KAAK,EAAGyC,EAAE,IAAMhE,CAAC,IAAKhB,CAAC,CAACuC,KAAK,CAACyC,EAAE,CAACC,MAAM,CAACjE,CAAC,CAACc,KAAK,CAACkD,EAAE,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC;AAE3E;;;;AAAA;AAIO,MAAMZ,IAAI,GAAG,MAAwCF,IAAI,EAAK,CAAC5C,EAAE,CAAC,GAAG,CAAC;AAE7E;;;;AAAA;AAIO,MAAM+C,IAAI,GAAG,MAAuDH,IAAI,EAAK,CAAC5C,EAAE,CAAC,GAAG,CAAC;AAE5F;;;;;;AAAA;AAMO,MAAM2D,SAAS,GAMlB,CAAI/C,SAAuB,EAAEC,OAAgB,KAC/CU,QAAQ,CACL/B,CAAC,IACA,kBAAI,EACFA,CAAC,EACDgC,EAAE,CAACmC,SAAS,CAAC/C,SAAS,CAAC,EACvBpC,CAAC,CAACoF,UAAU,CAAC,MACX,IAAI5C,KAAK,CAACH,OAAO,IAAI,qDAAqD,CAAC,CAC5E,CACF,EACFpB,CAAC,IACCD,CAAC,IACA,kBAAI,EACFA,CAAC,EACDgC,EAAE,CAACqC,cAAc,CAACjD,SAAS,CAAC,EAC5BpC,CAAC,CAACoF,UAAU,CAAC,MACX,IAAI5C,KAAK,CAACH,OAAO,IAAI,qDAAqD,CAAC,CAC5E,EACDrC,CAAC,CAACsF,GAAG,CAAEzC,KAAK,IAAI;EACd,MAAMhB,GAAG,GAAGb,CAAC,CAACc,KAAK,EAAE;EACrBD,GAAG,CAACgB,KAAK,CAAC,GAAG5B,CAAC;EACd,OAAOY,GAAG;AACZ,CAAC,CAAC,CACH,CACN;AA0BH;;;;AAAA;AAIO,MAAM0D,aAAa,GAAG,CAC3BtB,MAA+D,EAC/DuB,OAA2E,KAC7C,IAAI3F,OAAO,CAAC,MAAM,EAAEoE,MAAM,EAAEuB,OAAO,CAAC;AAOpE;;;;AAAA;AAIO,MAAMT,SAAS,GAAG,CACvBd,MAAiD,EACjDuB,OAA6D,KAE7DD,aAAa,CACVvE,CAAC,IAAK,kBAAI,EAACiD,MAAM,CAACjD,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,EAC/CgE,EAAE,IAAMhE,CAAC,IAAK,kBAAI,EAACwE,OAAO,CAACR,EAAE,CAAC,CAAChE,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAEC,CAAC,IAAK,CAACA,CAAC,EAAEnD,CAAC,CAAC,CAAC,CAAC,CAC9D;AAOH;;;AAAA;AAGO,MAAMiC,GAAG,GAAgBwC,KAAoC,IACjEzE,CAAI,IAAQ,kBAAI,EAACyE,KAAK,CAAC1F,QAAQ,CAACiB,CAAC,CAAC,EAAEhB,CAAC,CAAC0F,cAAc,CAACjD,kBAAQ,CAAC,CAAC;AAElE;;;AAAA;AAGO,MAAMkD,SAAS,GAAUF,KAAmB,IAChDzE,CAAI,IAAgBhB,CAAC,CAAC4F,QAAQ,CAACH,KAAK,CAAC1F,QAAQ,CAACiB,CAAC,CAAC,CAAC;AAEpD;;;AAAA;AAGO,MAAM6E,WAAW,GAAgBJ,KAA+B,IACpEzE,CAAI,IAAmB,kBAAI,EAACyE,KAAK,CAAC1F,QAAQ,CAACiB,CAAC,CAAC,EAAEhB,CAAC,CAACkE,OAAO,CAAC,CAAC,CAAC1D,CAAC,EAAEa,CAAC,CAAC,KAAKA,CAAC,CAAC,CAAC;AAE3E;;;AAAA;AAGO,MAAM4C,MAAM,GAAgBwB,KAA4B,IAC5DK,QAAW,IAAuB,kBAAI,EAACL,KAAK,CAAC1F,QAAQ,CAAC+F,QAAQ,CAAC,EAAE9F,CAAC,CAACkE,OAAO,CAAC,CAAC,CAACC,CAAC,EAAE3D,CAAC,CAAC,KAAK2D,CAAC,CAAC,CAAC;AAE7F;;;AAAA;AAGO,MAAMP,MAAM,GAAgB6B,KAA4B,IAC5DpF,QAAW,IAAQ,kBAAI,EAACoF,KAAK,CAACnF,QAAQ,CAACD,QAAQ,CAAC,CAACQ,SAAS,CAAC,EAAEb,CAAC,CAAC0F,cAAc,CAACjD,kBAAQ,CAAC,CAAC;AAE3F;;;AAAA;AAGO,MAAM+C,OAAO,GAAaC,KAA0B,IACxDxE,CAAI,IAAMD,CAAI,IAAQ,kBAAI,EAACyE,KAAK,CAACnF,QAAQ,CAACW,CAAC,CAAC,CAACD,CAAC,CAAC,EAAEhB,CAAC,CAACO,KAAK,CAAC,CAAC,CAACC,CAAC,EAAEa,CAAC,CAAC,KAAKA,CAAC,EAAEoB,kBAAQ,CAAC,CAAC;AAErF;;;AAAA;AAGO,MAAMS,aAAa,GAAauC,KAA0B,IAC9DxE,CAAI,IAAMD,CAAI,IAAgBhB,CAAC,CAAC4F,QAAQ,CAACH,KAAK,CAACnF,QAAQ,CAACW,CAAC,CAAC,CAACD,CAAC,CAAC,CAAC;AAEjE;;;AAAA;AAGO,MAAM+E,MAAM,GAAgBN,KAA+B,IAC/DO,CAAc,IACZhF,CAAI,IACH,kBAAI,EACFyE,KAAK,CAAC1F,QAAQ,CAACiB,CAAC,CAAC,EACjBhB,CAAC,CAACC,OAAO,CAAEgB,CAAC,IAAKwE,KAAK,CAACnF,QAAQ,CAAC0F,CAAC,CAAC/E,CAAC,CAAC,CAAC,CAACD,CAAC,CAAC,CAAC,EACzChB,CAAC,CAACO,KAAK,CAAC,CAAC,CAACC,CAAC,EAAEa,CAAC,CAAC,KAAKA,CAAC,EAAEoB,kBAAQ,CAAC,CACjC;AAAA","names":["clone","original","copy","cloneTrait","Object","setPrototypeOf","getPrototypeOf","Symbol","prismComposition","that","self","Builder","getWhole","getOptic","E","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","S","omit","filter","predicate","message","prism","right","Error","identity","nonNullable","some","O","index","i","optional","RA","get","replaceOption","RR","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]}